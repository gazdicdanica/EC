
<mat-stepper #stepper [linear]="false">
    <mat-step *ngFor="let question of questions; let i = index" [stepControl]="stepControls[i]">
        <form [formGroup]="stepControls[i]">
            <ng-template matStepLabel>Question {{ i + 1 }}</ng-template>
            <div class="wrapper">
                <div class="background">
                    <mat-spinner color="accent" *ngIf="isLoading"></mat-spinner>
                    <div  *ngIf="!isLoading">
                        <div style="text-align: center; font-weight: bold; font-size: 30px;">
                            {{ question.question }}
                        </div>
                        <div style="height: 15px;"></div>
                        <mat-radio-group style="display: flex; flex-direction: column; align-items: flex-start;" formControlName="answer">
                            <mat-radio-button *ngFor="let option of question.answers; let j = index" [value]="j">{{ option }}</mat-radio-button>
                        </mat-radio-group>
                        <div style="display: flex; width: 100%; justify-content: flex-end; margin-top: 20px;">
                            <button *ngIf="i != 0" mat-button matStepperPrevious>Back</button>
                            <button *ngIf="i != questions.length - 1" mat-button matStepperNext type="button" (click)="setBool(i+1)">Next</button>
                            <button *ngIf="i == questions.length - 1" mat-button (click)="finish()">Finish</button>
                        </div>
                    </div>
                    
                </div>
            </div>
        </form>
        
    </mat-step>
</mat-stepper>